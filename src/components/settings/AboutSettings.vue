<!-- å…³äºæˆ‘ä»¬ -->
<template>
  <div class="min-h-screen pb-16 bg-transparent">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- HERO -->
      <header class="relative text-center">

        <h1 class="main-title">
          ç³–æœæ¢¦çƒ­æ¦œ â€” èšåˆå…¨ç½‘ã€æ´å¯Ÿè¶‹åŠ¿
        </h1>

        <div class="main-desc">
          <p class="mt-1">å®æ—¶èšåˆå¤šå¹³å°çƒ­æ¦œã€æ™ºèƒ½æ’åºä¸æ¸…æ™°å‘ˆç°ï¼Œå¸®åŠ©ä½ åœ¨ä¿¡æ¯æ´ªæµä¸­å¿«é€ŸæŠ“å–ä»·å€¼ä¸è¶‹åŠ¿</p>
          <p class="mt-1">é¡¹ç›®ç”¨åˆ°çš„æ‰€æœ‰æ¥å£å‡æ˜¯å®˜æ–¹æ¥å£ï¼Œæ— ä»»ä½•ç¬¬ä¸‰æ–¹ä¸­è½¬ï¼Œä¸»æ‰“æ— æƒ…é“æ‰‹</p>
          <p class="mt-1">ğŸ‰æœ¬é¡¹ç›®å‰åç«¯åœ¨GitHubä¸Šå‡å·²100%å¼€æº
            <a class="inline-flex items-center gap-2 px-4 rounded-lg bg-white/5 border border-white/10 text-gray-900 dark:text-gray-100 hover:bg-white/10 transition"
               href="https://github.com/CandyDream6/tgmeng-top-search-frontend" target="_blank" rel="noopener">
              ğŸ‘‰å¼€æºä»“åº“
            </a>
          </p>
        </div>
        <div class="mt-10 flex justify-center gap-3 flex-wrap">

        </div>
      </header>

      <!-- æ•°æ®ç‰¹æ€§ -->
      <section>
        <!--        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">æ•°æ®ç‰¹æ€§</h2>-->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8">
          <div v-for="feature in dataFeatures" :key="feature.name" class="card-bg">
            <p class="card-title">{{ feature.name }}</p>
            <p class="card-title-special">{{ feature.desc }}</p>
          </div>
        </div>
      </section>

      <!-- å¹³å°ç‰¹æ€§ -->
      <section class="mt-16">
        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">å¹³å°ç‰¹æ€§</h2>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-3 mt-8">
          <div v-for="feature in platformFeatures" :key="feature.name" class="card-bg">
            <h3 class="card-title">{{ feature.name }}</h3>
            <p class="card-desc">{{ feature.desc }}</p>
          </div>
        </div>
      </section>

      <!-- å›¢é˜Ÿä¸è´¡çŒ®è€… -->
      <section class="mt-16">
        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">å›¢é˜Ÿä¸è´¡çŒ®è€…</h2>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8">
          <div v-for="member in teamAndContributors" :key="member.name" class="card-bg flex">
            <img class="w-12 h-12 rounded-full" :src="member.avatar" alt="member.name"/>
            <div>
              <div class="card-title">{{ member.name }}</div>
              <div class="card-desc ml-2">{{ member.role }}</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Contact -->
      <section id="contact" class="mt-16">
        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">è”ç³»ä¸æ”¯æŒ</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8">
          <router-link to="/setting/community" @click="scrollToTop">
            <div class="card-bg">
              <h4 class="card-title">åŠ å…¥äº¤æµç¤¾åŒº</h4>
              <p class="card-desc">æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„äº¤æµç¤¾åŒºï¼Œä¸å…¶ä»–ç”¨æˆ·åˆ†äº«ã€è®¨è®ºå’Œäº¤æµã€‚</p>
            </div>
          </router-link>
          <a href="https://github.com/CandyDream6/tgmeng-top-search-frontend" target="_blank" rel="noopener">
            <div class="card-bg">
              <h4 class="card-title">æŠ€æœ¯æ”¯æŒ</h4>
              <p class="card-desc">é‡åˆ°é—®é¢˜æˆ–æƒ³è´¡çŒ®ä»£ç ï¼Ÿæ¬¢è¿åˆ° GitHub æäº¤ PR æˆ– Issueã€‚</p>
            </div>
          </a>
        </div>
      </section>

      <!-- å·²æ¥å…¥å¹³å°æ¨ªå‘æ»šåŠ¨å±•ç¤ºï¼ˆ3è¡Œæ— é™å¾ªç¯ï¼‰ -->
      <section class="mt-16">
        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">å·²æ¥å…¥å¹³å°</h2>
        <div class="space-y-2 mt-8">
          <div
              v-for="rowIndex in 3"
              :key="rowIndex"
              class="overflow-hidden relative h-24"
              @mouseenter="pauseScroll(rowIndex)"
              @mouseleave="resumeScroll(rowIndex)"
          >
            <div
                class="flex gap-4 flex-nowrap absolute"
                :ref="'platformWrapper' + rowIndex"
                :style="{ transform: `translateX(-${scrollPos[rowIndex - 1]}px)` }"
            >
              <div
                  v-for="(platform,index) in duplicatedPlatforms"
                  :key="rowIndex + '-' + index"
                  class="p-4 flex-shrink-0 w-24 h-24 bg-white dark:bg-dark-card rounded-xl flex items-center justify-center   shadow-sm"
              >
                <img :src="platform.icon" :alt="platform.name" class="object-contain rounded-xl"/>
              </div>
            </div>
          </div>
        </div>
      </section>


      <!-- Timeline æœ€åº•éƒ¨ -->
      <section class="mt-16">
        <h2 class="text-xl font-bold text-gray-900 dark:text-gray-100">é¡¹ç›®æ—¥å¿—</h2>

        <div class="relative mt-10">
          <div
              class="absolute left-6 top-0 bottom-0 w-px bg-gradient-to-b from-blue-400 to-indigo-500 opacity-60"></div>
          <ul class="space-y-8 pl-12">
            <li v-for="group in visibleTimeline" :key="group.date" class="relative">
              <div
                  class="absolute -left-8 top-1 w-4 h-4 rounded-full bg-white border-2 border-blue-500 shadow-sm"></div>

              <div v-for="item in group.events" :key="item.id" class="card-bg">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2">
                  <div>
                    <div class="text-gray-900 dark:text-gray-100 font-bold text-lg" style="text-align: left">
                      <span class="text-green-600">{{ group.date }}</span>
                      <span class="ml-4 card-title">{{ item.title }}</span>
                    </div>
                    <ul class="mt-1 space-y-1 text-left">
                      <li v-for="(d, i) in item.desc" :key="i" class="card-desc">
                        - {{ d }}
                      </li>
                    </ul>
                  </div>
                  <div class="text-sm text-gray-400 mt-2 sm:mt-0">{{ item.tag }}</div>
                </div>
              </div>
            </li>

            <!-- å±•å¼€å…¨éƒ¨æŒ‰é’®ä½œä¸ºæœ€åä¸€ä¸ª li -->
            <li class="relative flex justify-start">
              <button @click="toggleTimeline" class="card-desc">
                {{ timelineFolded ? `å±•å¼€å…¨éƒ¨ (${timeline.length})` : 'æŠ˜å ' }}
              </button>
            </li>
          </ul>
        </div>
      </section>

    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      platformFeatures: [
        {name: 'ğŸš¨ å®æ—¶èšåˆ', desc: 'è¦†ç›–å…¨ç½‘çƒ­é—¨å¹³å°ï¼Œå®æ—¶æ¨é€å…¨çƒæœ€å‰æ²¿çš„è¶‹åŠ¿å’Œäº‹ä»¶ï¼Œç¡®ä¿ç”¨æˆ·å¿«é€Ÿè·å–ä¿¡æ¯'},
        {name: 'ğŸŒ å¤šç»´åº¦å¹³å°è¦†ç›–', desc: 'æ”¯æŒæ–°é—»ã€ç¤¾äº¤ã€åª’ä½“ã€GitHub ç­‰å¤šå¹³å°å†…å®¹èšåˆï¼Œä¸ºç”¨æˆ·å¸¦æ¥å…¨æ–¹ä½çš„ä¿¡æ¯æ´å¯Ÿ'},
        {name: 'ğŸ“Š æ™ºèƒ½æ’åº', desc: 'ç»“åˆå¤§æ•°æ®åˆ†æå’Œå¤šç»´åº¦æŒ‡æ ‡ï¼Œç²¾å‡†è¾“å‡ºæ›´å…·å¯ä¿¡åº¦çš„çƒ­åº¦æ’åï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¿«æŠ“å–å…³é”®ä¿¡æ¯'},
        {name: 'ğŸ“± è·¨å¹³å°å“åº”å¼è®¾è®¡', desc: 'æ‰“é€ æè‡´çš„è·¨è®¾å¤‡ä½“éªŒï¼Œæä¾›å®Œç¾é€‚é…æ¡Œé¢ä¸ç§»åŠ¨ç«¯çš„ç•Œé¢ï¼Œéšæ—¶éšåœ°ç•…äº«æµç•…æµè§ˆ'},
        {name: 'âš¡ è¶…é«˜æ€§èƒ½', desc: 'é‡‡ç”¨å‰æ²¿æŠ€æœ¯ä¼˜åŒ–ï¼Œæä¾›æé€ŸåŠ è½½å’Œç§’çº§æ›´æ–°ï¼Œç¡®ä¿ä»»ä½•æ—¶åˆ»éƒ½æµç•…ä¸å¡é¡¿'},
        {name: 'ğŸ”’ éšç§ä¼˜å…ˆ', desc: 'åšæŒâ€œéšç§å³äººæƒâ€çš„ç†å¿µï¼Œç»ä¸è¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼Œä¸ªæ€§åŒ–è‡ªå®šä¹‰é…ç½®éƒ½åœ¨æµè§ˆå™¨ç¼“å­˜ï¼Œä¿éšœç”¨æˆ·æ•°æ®å®‰å…¨'},
        {name: 'ğŸ› ï¸ å¼€æºå‹å¥½', desc: 'ä¸“ä¸ºå¼€å‘è€…è®¾è®¡ï¼Œæ”¯æŒçµæ´»çš„äºŒæ¬¡å¼€å‘ä¸è‡ªå®šä¹‰æ‰©å±•ï¼Œæä¾›ä¸°å¯Œçš„APIæ¥å£å’Œæ’ä»¶æœºåˆ¶'},
        {name: 'ğŸ¨ é«˜åº¦æ ·å¼è‡ªå®šä¹‰', desc: 'æä¾›å…¨é¢çš„è‡ªå®šä¹‰åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä¸ªäººéœ€æ±‚ï¼Œè°ƒæ•´ä¸»é¢˜è‰²ã€å­—ä½“ã€å¸ƒå±€ç­‰ï¼Œæ‰“é€ ä¸“å±ç•Œé¢ï¼Œæè‡´ç¬¦åˆä¸ªæ€§åŒ–éœ€æ±‚'}
      ],
      teamAndContributors:
          [
            {avatar: require('@/assets/avatars/project/tgmeng.png'), name: 'ç³–æœæ¢¦', role: 'åˆ›å§‹äºº Â· å…¨æ ˆå·¥ç¨‹å¸ˆ'},
            {avatar: require('@/assets/avatars/project/Jhhgiyv.png'), name: 'Jhhgiyv', role: 'ä¼˜é…·Cookieè·å–æ–¹å¼æä¾›'},
            {avatar: require('@/assets/avatars/project/xi.png'), name: 'å¸Œ', role: 'çƒ­ç‚¹åˆ—è¡¨æ ·å¼å¤„ç†'},
          ],
      scrollPos:
          [0, 0, 0], // æ¯è¡Œçš„æ»šåŠ¨ä½ç½®
      scrollPaused:
          [false, false, false],
      scrollSpeed:
          [2, 1.5, 2.5], // æ¯è¡Œé€Ÿåº¦å¯ä¸åŒ
      timelineFolded:
          true,
      // TODOæ¯æ¬¡æ›´æ–°ï¼Œè¿™é‡Œå†™ä¸€ä¸‹äº‹ä»¶æ•°æ®
      timeline:
          [
            {
              date: '2025-09-12',
              events: [{
                id: 1,
                title: 'æ¥å…¥æ¸¸æˆçƒ­æ¦œæ¨¡å—',
                desc: ['æ–°å¢æ¸¸æˆç±»æ•°æ®æºï¼ˆSteamã€TapTapï¼‰', 'æ”¯æŒå®æ—¶æ¦œå•æ¨é€ã€‚', 'æ”¯æŒå®æ—¶æ¦œå•æ¨é€ã€‚', 'æ”¯æŒå®æ—¶æ¦œå•æ¨é€ã€‚'],
                tag: 'Feature'
              }]
            },
            {
              date: '2025-06-03',
              events: [{
                id: 2,
                title: 'æ ·å¼ä¸æ·±è‰²æ¨¡å¼é‡æ„',
                desc: ['å…¨ç«™æ ·å¼é‡æ„', 'æ”¯æŒæ›´ç²¾ç»†çš„æš—é»‘ä¸»é¢˜åŠç”¨æˆ·è‡ªå®šä¹‰æ ·å¼ã€‚'],
                tag: 'UI'
              }]
            },
            {
              date: '2024-11-20',
              events: [{id: 3, title: 'ä¸Šçº¿ v2.0', desc: ['æ€§èƒ½ä¼˜åŒ–', 'ç¼“å­˜ç­–ç•¥ä¸å¤šæºèšåˆé€»è¾‘é‡å†™ã€‚'], tag: 'Release'}]
            },
            {
              date: '2024-07-01',
              events: [{id: 4, title: 'æ•°æ®æºæ‹“å±•', desc: ['æ–°å¢å¾®åšã€Bilibiliã€çŸ¥ä¹ç­‰å¤šä¸ªå†…å®¹æºã€‚'], tag: 'Data'}]
            },
            {
              date: '2024-07-01',
              events: [{id: 4, title: 'æ•°æ®æºæ‹“å±•', desc: ['æ–°å¢å¾®åšã€Bilibiliã€çŸ¥ä¹ç­‰å¤šä¸ªå†…å®¹æºã€‚'], tag: 'Data'}]
            },
            {
              date: '2024-07-01',
              events: [{id: 4, title: 'æ•°æ®æºæ‹“å±•', desc: ['æ–°å¢å¾®åšã€Bilibiliã€çŸ¥ä¹ç­‰å¤šä¸ªå†…å®¹æºã€‚'], tag: 'Data'}]
            },
            {
              date: '2023-12-10',
              events: [{id: 5, title: 'é¡¹ç›®å¯åŠ¨', desc: ['ä»ä¸€ä¸ªå°å·¥å…·æˆé•¿ä¸ºå…¬å¼€å¯ç”¨çš„çƒ­æ¦œèšåˆç«™ç‚¹ã€‚'], tag: 'Init'}]
            },
            {
              date: '2023-05-15',
              events: [{id: 6, title: 'é¦–æ¬¡å…¬å¼€æµ‹è¯•', desc: ['é‚€è¯·é¦–æ‰¹ç”¨æˆ·ä½“éªŒå¹¶ç»™å‡ºåé¦ˆã€‚'], tag: 'Beta'}]
            },
          ],
    }
  },
  computed: {
    platforms() {
      return this.platformsData
          .filter((item, index, arr) =>
              arr.findIndex(i => i.icon === item.icon) === index
          );
    },
    platformsData() {
      return this.$store.state.categroies
          .flatMap(c => c.subCategories || [])
          .map(p => ({
            name: p.title,
            icon: p.logo
          }));
    },
    dataFeatures() {
      return [
        {name: 'å·²æ¥å…¥å¹³å°', desc: this.platformsData.length/2},
        {name: 'æ—¥å‡æŠ“å–çƒ­ç‚¹', desc: this.platformsData.length * 50 * 60 * 24 + '+'},
        {name: 'æ›´æ–°é¢‘ç‡', desc: 'åˆ†é’Ÿçº§'},
      ];
    },
    visibleTimeline() {
      return this.timelineFolded ? this.timeline.slice(0, 4) : this.timeline
    },
    duplicatedPlatforms() {
      return [...this.platforms, ...this.platforms, ...this.platforms]
    }
  },
  mounted() {
    this.startScroll()
  },
  methods: {
    toggleTimeline() {
      this.timelineFolded = !this.timelineFolded
    },
    startScroll() {
      const step = () => {
        for (let i = 0; i < 3; i++) {
          if (!this.scrollPaused[i]) {
            this.scrollPos[i] += this.scrollSpeed[i];
            const wrapper = this.$refs['platformWrapper' + (i + 1)][0];
            if (wrapper) {
              const firstWidth = wrapper.children[0].offsetWidth + parseInt(getComputedStyle(wrapper.children[0]).marginRight);
              // ç¡®ä¿æ¨ªå‘æ»šåŠ¨è¾¾åˆ°å¹³å°æ€»å®½åº¦åä»å¤´å¼€å§‹æ»šåŠ¨
              if (this.scrollPos[i] >= firstWidth * this.platforms.length) {
                this.scrollPos[i] = 0;
              }
            }
          }
        }
        requestAnimationFrame(step);
      }
      requestAnimationFrame(step)
    },
    pauseScroll(rowIndex) {
      this.scrollPaused[rowIndex - 1] = true
    },
    resumeScroll(rowIndex) {
      this.scrollPaused[rowIndex - 1] = false
    },
    scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }
}
</script>

<style scoped>
@keyframes blob {
  0% {
    transform: translateY(0) scale(1);
  }
  33% {
    transform: translateY(-8px) scale(1.03);
  }
  66% {
    transform: translateY(4px) scale(0.98);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

.animate-blob {
  animation: blob 8s infinite ease-in-out;
}

.animation-delay-2000 {
  animation-delay: 2s;
}

:root {
  --dark-card: #0b1220;
}

.dark .dark\:bg-dark-card {
  background-color: var(--dark-card);
}

.relative > ul > li {
  list-style: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.main-title {
  @apply mt-6 text-3xl sm:text-4xl md:text-5xl font-extrabold leading-tight text-gray-900 dark:text-gray-100
}

.main-desc {
  @apply mt-6 max-w-3xl mx-auto text-gray-600 dark:text-gray-300
}

.card-bg {
  @apply p-4 rounded-xl bg-gradient-to-r from-indigo-600/10 to-pink-600/10 border border-transparent
  dark:border-transparent shadow-sm hover:shadow-lg transition transform hover:-translate-y-1;
}

.card-title {
  @apply font-semibold text-gray-900 dark:text-gray-100
}

.card-title-special {
  @apply text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mt-2
}

.card-desc {
  @apply text-sm text-gray-500 dark:text-gray-400 mt-1
}
</style>
